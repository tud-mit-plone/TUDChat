<h1 tal:replace = "structure context/manage_page_header">
    Header
</h1>

<h2 tal:define  = "manage_tabs_message options/manage_tabs_message | nothing"
    tal:replace = "structure context/manage_tabs">
    Tabs
</h2>

<h3>verfügbare Chat-Datenbanken konfigurieren</h3>

<p tal:condition="python: request.get('status')==1">Fehler: Es wurden keine neuen Datenbanken hinzugefügt</p>
<p tal:condition="python: request.get('status')==2">Fehler: Es wurden keine Datenbanken unter diesem Pfad gefunden</p>

<p tal:condition="python: request.get('nochange')">Fehler: Es wurden keine Datenbanken hinzugefügt oder entfernt</p>

<h4>Datenbank-Liste</h4>

<tal:block define="db_list python:here.getDbList()">
  <form action="updateDbs" enctype="multipart/form-data" method="post">
    <table id="db_list" tal:condition="python: len(db_list)>0">
      <thead>
        <tr>
          <th>Aktiv</th>
          <th>Löschen</th>
          <th>Pfad</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="db db_list">
          <td><input type="checkbox" tal:attributes="name python: 'active_'+db['path']; checked python: db['in_use']" /></td>
          <td><input type="checkbox" tal:attributes="name python: 'delete_'+db['path']" /></td>
          <td tal:content="python: db['path']"></td>
        </tr>
      </tbody>
    </table>
    <input type="submit" value="Ändern" />
  </form>
  <p tal:condition="python: len(db_list)==0">Keine Datenbanken vorhanden</p>
</tal:block>

<h4>Datenbanken aus einem Pfad hinzufügen</h4>

<form action="addDbPath" enctype="multipart/form-data" method="post">
  <p>Pfad: <input name="path" type="text" size="80" maxlength="255"></p>
  <input type="submit" value="Hinzufügen" />
</form>

<tal:zmi_footer replace = "structure context/manage_page_footer" />