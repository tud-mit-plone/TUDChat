<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="contact">

<body>
<metal:javascriptslot fill-slot="javascript_head_slot">
  <script type="text/javascript" src="jquery-1.7.min.js"></script>
  <script type="text/javascript" src="jquery-ui-1.8.19.custom.min.js"></script>
  <script type="text/javascript" src="jquery-ui-timepicker-addon.js"></script>
  <script type="text/javascript" src="jquery.ui.datepicker-de.js"></script>

  <script language="javascript">

    $(document).ready(
        function(){
          $("#start_date, #end_date").datetimepicker({
            timeFormat: 'hh:mm',
            dateFormat: 'dd.mm.yy,',
            hourGrid: 6,
            minuteGrid: 30,
            stepMinute: 5,
            hour: 12,
          });
        }
    );


  </script>

</metal:javascriptslot>

<metal:cssslot fill-slot="style_slot">
  <link rel="stylesheet" href="jquery-ui-timepicker-addon.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="tud_chat_css/ui-lightness/jquery-ui-1.8.19.custom.css" type="text/css" media="screen" />

</metal:cssslot>

<metal:main fill-slot="main" tal:define="errors request/errors|python:{};
                                         here_url context/@@plone_context_state/object_url">

        <h1>Chat-Sitzung hinzufügen</h1>

<p tal:condition="python:not here.chat_storage">Es wurde noch keine Datenbank konfiguriert. Diese kann in den Chat-Einstellungen eingestellt werden.</p>

<div tal:condition="python:here.chat_storage">

<form tal:attributes="action string:${here_url}/addSessionSubmit" name="form" method="post">

  <div tal:define="error errors/title | python:{};" tal:attributes="class python: 'field' + (error and ' error' or '')">
    <label for="title">Titel</label>
    <span class="fieldRequired" title="Required"> (Required) </span>
    <div class="formHelp">Bitte geben Sie ein Titel für die Chat-Sitzung an.</div>
    <div class="error_message" tal:condition="error" tal:content="error"></div>
    <input type="text" id="title" name="title" tal:attributes="value request/title|nothing"/>
  </div>

  <div tal:define="error errors/title | python:{};" tal:attributes="class python: 'field' + (error and ' error' or '')">
    <label for="description">Beschreibung</label>
    <div class="formHelp">Bitte geben Sie eine Beschreibung für die Chat-Sitzung an.</div>
    <div class="error_message" tal:condition="error" tal:content="error"></div>
    <textarea id="description" name="description" tal:attributes="value request/description|nothing"></textarea>
  </div>

  <div tal:define="error errors/start_date | python:{};" tal:attributes="class python: 'field' + (error and ' error' or '')">
    <label for="start_date">Beginn</label>
    <span class="fieldRequired" title="Required"> (Required) </span>
    <div class="formHelp">Bitte geben Sie den Beginn der Chat-Sitzung an.</div>
    <div class="error_message" tal:condition="error" tal:content="error"></div>
    <input type="text" id="start_date" name="start_date" tal:attributes="value request/start_date|nothing"/>
  </div>

  <div tal:define="error errors/end_date | python:{};" tal:attributes="class python: 'field' + (error and ' error' or '')">
    <label for="end_date">Ende</label>
    <span class="fieldRequired" title="Required"> (Required) </span>
    <div class="formHelp">Bitte geben Sie das Ende der Chat-Sitzung an.</div>
    <div class="error_message" tal:condition="error" tal:content="error"></div>
    <input type="text" id="end_date" name="end_date" tal:attributes="value request/end_date|nothing"/>
  </div>

  <div tal:define="error errors/password | python:{};" tal:attributes="class python: 'field' + (error and ' error' or '')">
    <label for="end_date">Passwort</label>
    <div class="formHelp">Bitte geben Sie ein Passwort für die Chat-Sitzung an, falls Sie den Zugang beschränken wollen.</div>
    <div class="error_message" tal:condition="error" tal:content="error"></div>
    <input type="text" id="password" name="password" tal:attributes="value request/password|nothing"/>
  </div>

  <div tal:define="error errors/max_users | python:{};" tal:attributes="class python: 'field' + (error and ' error' or '')">
    <label for="end_date">maximale Benutzer</label>
    <div class="formHelp">Bitte geben Sie die maximale Benutzerzahl ein, falls Sie die Anzahl der Chat-Benutzer limitieren möchten.</div>
    <div class="error_message" tal:condition="error" tal:content="error"></div>
    <input type="text" id="max_users" name="max_users" tal:attributes="value request/max_users|nothing"/>
  </div>


  <div class="formControls">
    <input type="hidden" name="form.submitted" value="1" />
    <input class="context" type="submit" id="save" name="form.button.Create" value="Hinzuf&uuml;gen" />
    <input class="context" type="submit" id="cancel_button" name="form.button.Cancel" value="Abbrechen" />
  </div>

</form>

</div>

</metal:main>

<metal:bottom fill-slot="bottom">
  <div class="documentBottomLine">
    <div metal:use-macro="here/document_byline/macros/byline">
        Get the byline - contains details about author and modification date.
    </div>
    <div metal:use-macro="here/document_actions/macros/document_actions">
        Document actions (print, sendto etc)
    </div>
    <br class="floatclearer" />
  </div>
</metal:bottom>

</body>
</html>
